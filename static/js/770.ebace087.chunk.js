"use strict";(self.webpackChunkmy_notes=self.webpackChunkmy_notes||[]).push([[770],{3e3:function(n,e,t){t.d(e,{$:function(){return i}});var o,r=t(168),i=t(5397).Z.div(o||(o=(0,r.Z)(["\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  \n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 40px;\n  background: grey;\n  color: #ffffff;\n  z-index: 1000;\n"])))},2770:function(n,e,t){t.r(e),t.d(e,{default:function(){return Xn}});var o,r,i,s,c,a,d,l,u,p,x,f=t(9439),h=t(8762),m=t(2791),g=t(7689),b=t(1413),y=t(3433),Z=t(5984),j=t(2058),w=t(828),v=t(6355),k=t(6856),C=t(168),S=t(5397),N=t(7213),z=(0,S.Z)(N.t.Item)(o||(o=(0,C.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 4px 8px;\n\n  transition: background-color 250ms linear;\n\n  :hover {\n    background-color: ",";\n  }\n\n  :not(:last-child) {\n    border-bottom: ",";\n  }\n"])),(function(n){return n.theme.colors.bcgPrim}),(function(n){return n.theme.borders.light})),B=S.Z.label(r||(r=(0,C.Z)(["\n  display: flex;\n  align-items: center;\n  margin-left: 8px;\n"]))),T=S.Z.input(i||(i=(0,C.Z)(["\n  display: none;\n\n  :checked + button {\n    color: ",";\n  }\n  :checked ~ span {\n    text-decoration: line-through grey 2px;\n    color: ",";\n  }\n"])),(function(n){return n.theme.colors.textSec}),(function(n){return n.theme.colors.textSec})),U=S.Z.button(s||(s=(0,C.Z)(["\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  width: 20px;\n  height: 30px;\n  padding: 0;\n  color: green;\n"]))),E=S.Z.span(c||(c=(0,C.Z)(["\n  max-width: 220px;\n  margin-left: 8px;\n  font-size: ",";\n  font-weight: 600;\n  color: ",";\n  word-wrap: break-word;\n"])),(function(n){return n.theme.fontSizes.xs}),(function(n){return n.theme.colors.textPrim})),D=S.Z.button(a||(a=(0,C.Z)(["\n  border: none;\n  background-color: transparent;\n  width: 20px;\n  height: 30px;\n  padding: 0;\n  color: ",";\n\n  transition: color 250ms linear;\n\n  :hover.active {\n    color: ",";\n    cursor: pointer;\n  }\n"])),(function(n){return n.theme.colors.textSec}),(function(n){return n.theme.colors.textPrim})),_=S.Z.button(d||(d=(0,C.Z)(["\n  cursor: pointer;\n  margin-left: 8px;\n  border: none;\n  background-color: transparent;\n  width: 20px;\n  height: 30px;\n  padding: 0;\n  color: ",";\n\n  transition: color 250ms linear;\n\n  :hover {\n    color: red;\n  }\n"])),(function(n){return n.theme.colors.textSec})),A=S.Z.form(l||(l=(0,C.Z)(["\n  position: absolute;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  top: 0;\n  left: 0;\n  padding: 0 8px;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n  background-color: ",";\n  box-sizing: border-box;\n"])),(function(n){return n.theme.colors.bcgPrim})),I=S.Z.input(u||(u=(0,C.Z)(["\n  flex-grow: 1;\n  font-weight: 600;\n  background-color: transparent;\n"]))),P=S.Z.button(p||(p=(0,C.Z)(["\n  cursor: pointer;\n  margin-left: 20px;\n  border: none;\n  background-color: transparent;\n  color: ",";\n\n  transition: color 250ms linear;\n\n  :hover {\n    color: ",";\n  }\n"])),(function(n){return n.theme.colors.textSec}),(function(n){return n.theme.colors.textPrim})),L=t(184);function F(n){var e=n.textToUpdate,t=n.saveTodo,o=n.cancelEdit,r=(0,m.useState)(e),i=(0,f.Z)(r,2),s=i[0],c=i[1];(0,m.useEffect)((function(){return window.addEventListener("keydown",a),function(){window.removeEventListener("keydown",a)}}));var a=function(n){"Escape"===n.code&&o()};return(0,L.jsxs)(A,{onSubmit:function(n){n.preventDefault(),t(s)},children:[(0,L.jsx)(I,{type:"text",name:"newText",value:s,onChange:function(n){c(n.currentTarget.value)},autoComplete:"off"}),(0,L.jsx)(P,{type:"submit","aria-label":"Save task",children:(0,L.jsx)(v.TvB,{size:"20"})})]})}function M(n){var e=n.todo,t=n.completeTodo,o=n.editTodo,r=n.deleteTodo,i=(0,m.useState)(!1),s=(0,f.Z)(i,2),c=s[0],a=s[1],d=(0,j.o)(),l=e.id,u=e.text,p=e.completed,x=function(){a(!c)};return(0,L.jsxs)(z,{value:e,dragListener:!1,dragControls:d,children:[(0,L.jsx)(h.x,{onPointerDown:function(n){return d.start(n)},children:(0,L.jsx)(v.U9V,{size:"18",cursor:"grab",color:"#212121"})}),(0,L.jsxs)(B,{children:[(0,L.jsx)(T,{type:"checkbox",checked:!!p,readOnly:!0}),(0,L.jsx)(U,{onClick:function(){t(l)},"aria-label":"Complete task",children:p?(0,L.jsx)(v.l_A,{size:"18"}):(0,L.jsx)(v.Rdr,{size:"18"})}),(0,L.jsx)(E,{children:u})]}),(0,L.jsxs)(h.x,{ml:"auto",pl:2,display:"flex",children:[(0,L.jsx)(D,{type:"button","aria-label":"Edit task",onClick:x,disabled:!!p,className:p?"":"active",children:(0,L.jsx)(k.zmo,{size:"18"})}),(0,L.jsx)(_,{type:"button","aria-label":"Delete task",onClick:function(){r(l)},children:(0,L.jsx)(w.sQZ,{})})]}),c&&(0,L.jsx)(F,{saveTodo:function(n){x(),o(l,n)},textToUpdate:u,cancelEdit:x})]})}var J,R,G,H=(0,S.Z)(N.t.Group)(x||(x=(0,C.Z)(["\n  display: grid;\n  list-style: none;\n  padding: 0;\n  margin: 0;\n"])));function O(n){var e=n.todos,t=n.setTodos,o=n.completeTodo,r=n.editTodo,i=n.deleteTodo;return(0,L.jsx)(H,{axis:"y",values:e,onReorder:t,children:e.map((function(n){return(0,L.jsx)(M,{todo:n,completeTodo:o,editTodo:r,deleteTodo:i},n.id)}))})}var W,X,$,q,K,Q,V,Y,nn,en,tn=S.Z.form(J||(J=(0,C.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px 16px;\n    margin: 0;\n    border-bottom: ",";\n    background-color: transparent;\n"])),(function(n){return n.theme.borders.grey})),on=S.Z.input(R||(R=(0,C.Z)(["\n    padding: 4px;\n    border: none;\n    background-color: transparent;\n\n    :focus-visible {\n      outline: none;\n    }\n"]))),rn=S.Z.button(G||(G=(0,C.Z)(["\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  color: ",";\n\n  transition: color 250ms linear;\n\n  :hover {\n    color: ",";\n  }\n"])),(function(n){return n.theme.colors.textSec}),(function(n){return n.theme.colors.textPrim})),sn=function(n){var e=n.onSubmit,t=n.bcgNoteColor,o=(0,m.useState)(""),r=(0,f.Z)(o,2),i=r[0],s=r[1];return(0,L.jsx)(h.x,{bg:t,children:(0,L.jsxs)(tn,{onSubmit:function(n){n.preventDefault(),s(""),e(i)},children:[(0,L.jsx)(k.wL,{size:"24"}),(0,L.jsx)(on,{type:"text",name:"text",value:i,onChange:function(n){s(n.currentTarget.value)},placeholder:"New task"}),(0,L.jsx)(rn,{type:"submit","aria-label":"Add task",children:(0,L.jsx)(k.NcC,{size:"20"})})]})})},cn=t(2554),an=t(7845),dn=(0,cn.F4)(W||(W=(0,C.Z)(["",""])),an.Ji),ln=((0,cn.F4)(X||(X=(0,C.Z)(["",""])),an.U6),S.Z.div($||($=(0,C.Z)(["\n  position: relative;\n  cursor: ",";\n"])),(function(n){return n.draggable?"grab":"default"}))),un=S.Z.div(q||(q=(0,C.Z)(["\n  background-color: white;\n  max-width: 360px;\n  margin-bottom: 8px;\n  border: 1px solid grey;\n  border-radius: ",";\n  overflow: hidden;\n  box-shadow: ",";\n\n  animation: "," 500ms;\n"])),(function(n){return n.theme.radii.normal}),(function(n){return n.theme.shadows.box}),dn),pn=S.Z.h2(K||(K=(0,C.Z)(["\n  font-size: 16px;\n"]))),xn=S.Z.button(Q||(Q=(0,C.Z)(["\n  margin-left: 8px;\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  color: white;\n\n  transition: color 250ms linear;\n\n  :hover {\n    color: ",";\n  }\n"])),(function(n){return n.theme.colors.textSec})),fn=S.Z.button(V||(V=(0,C.Z)(["\n  cursor: pointer;\n  margin-left: 8px;\n  border: none;\n  background-color: transparent;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  color: white;\n\n  transition: color 250ms linear;\n\n  :hover {\n    color: ",";\n  }\n"])),(function(n){return n.theme.colors.textSec})),hn=S.Z.form(Y||(Y=(0,C.Z)(["\n  position: absolute;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  top: 0;\n  left: 0;\n  padding: 0 8px;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n  background-color: ",";\n  box-sizing: border-box;\n"])),(function(n){return n.theme.colors.bcgPrim})),mn=S.Z.input(nn||(nn=(0,C.Z)(["\n  font-size: 16px;\n  font-weight: 700;\n  background-color: transparent;\n  color: white;\n"]))),gn=S.Z.button(en||(en=(0,C.Z)(["\n  cursor: pointer;\n  border: none;\n  background-color: transparent;\n  color: grey;\n\n  transition: color 250ms linear;\n\n  :hover {\n    color: ",";\n  }\n"])),(function(n){return n.theme.colors.textPrim}));function bn(n){var e=n.nameToUpdate,t=n.saveNoteName,o=n.cancelEdit,r=(0,m.useState)(e),i=(0,f.Z)(r,2),s=i[0],c=i[1];(0,m.useEffect)((function(){return window.addEventListener("keydown",a),function(){window.removeEventListener("keydown",a)}}));var a=function(n){"Escape"===n.code&&o()};return(0,L.jsxs)(hn,{onSubmit:function(n){n.preventDefault(),t(s)},children:[(0,L.jsx)(mn,{type:"text",name:"newName",value:s,onChange:function(n){c(n.currentTarget.value)},autoComplete:"off"}),(0,L.jsx)(gn,{type:"submit","aria-label":"Save task",children:(0,L.jsx)(v.TvB,{size:"20"})})]})}var yn,Zn,jn,wn,vn=(0,m.createContext)(),kn=t(2475),Cn=t(4164),Sn=S.Z.div(yn||(yn=(0,C.Z)(["\n  position: fixed;\n  padding-top: 8px;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n\n  animation: "," 500ms;\n"])),dn),Nn=S.Z.div(Zn||(Zn=(0,C.Z)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),zn=document.querySelector("#modal-root");function Bn(n){var e=n.onClose,t=n.children;(0,m.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}));var o=function(n){"Escape"===n.code&&e()};return(0,Cn.createPortal)((0,L.jsx)(Sn,{onClick:function(n){n.currentTarget===n.target&&e()},children:(0,L.jsx)(Nn,{children:t})}),zn)}var Tn=S.Z.form(jn||(jn=(0,C.Z)(["\n  width: 300px;\n  padding: 16px;\n  text-align: center;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.6);\n"]))),Un=S.Z.p(wn||(wn=(0,C.Z)(["\n  color: #212112;\n"]))),En=t(370);function Dn(n){var e=n.onFormSubmit,t=n.toggleConfirm,o=n.name,r=n.isProcessing;return(0,L.jsxs)(Tn,{onSubmit:function(n){n.preventDefault(),e()},children:[(0,L.jsxs)(Un,{children:["Delete note ",(0,L.jsx)("b",{children:o}),"?"]}),(0,L.jsxs)(h.x,{mt:4,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,L.jsx)(En.z,{type:"button","aria-label":"Cancel",onClick:t,children:"Cancel"}),(0,L.jsx)(En.z,{type:"submit","aria-label":"Delete note",disabled:r,children:"DELETE"})]})]})}var _n,An=t(5668);function In(n){var e=n.note,t=(n.idx,(0,m.useState)(e.todos)),o=(0,f.Z)(t,2),r=o[0],i=o[1],s=(0,m.useState)(e.color),c=(0,f.Z)(s,2),a=c[0],d=c[1],l=(0,m.useState)(!1),u=(0,f.Z)(l,2),p=u[0],x=u[1],g=(0,m.useState)(!1),j=(0,f.Z)(g,2),w=j[0],v=j[1],C=(0,m.useState)(!1),S=(0,f.Z)(C,2),N=S[0],z=S[1],B=(0,m.useContext)(vn).dispatch,T=e.color+"55",U=(0,m.useState)(!1),E=(0,f.Z)(U,2),D=E[0],_=E[1],A=(0,m.useRef)(!0);(0,m.useEffect)((function(){A.current?A.current=!1:(B({type:"editNoteTodos",noteId:e._id,newTodos:r}),(0,An.Bk)(e._id,r))}),[B,e._id,r]);var I=function(){z(!N)},P=function(){x(!p)};return(0,L.jsx)(ln,{children:(0,L.jsxs)(un,{children:[w&&(0,L.jsx)(h.x,{position:"absolute",top:"0",left:"0",zIndex:"200",children:(0,L.jsx)(kn.gW,{color:a,onChange:function(n){d(n),B({type:"editNoteColor",noteId:e._id,newColor:a})}})}),(0,L.jsxs)(h.x,{bg:e.color,p:2,textAlign:"center",color:"white",display:"flex",justifyContent:"space-between",position:"relative",children:[(0,L.jsx)(pn,{children:e.name}),(0,L.jsxs)(h.x,{ml:"auto",display:"flex",children:[(0,L.jsx)(xn,{type:"button","aria-label":"Edit color",onClick:function(){v(!w),w&&(0,An.z0)(e._id,a)},children:(0,L.jsx)(k.X5H,{size:"20"})}),(0,L.jsx)(xn,{type:"button","aria-label":"Edit note",onClick:P,children:(0,L.jsx)(k.mM_,{size:"20"})}),(0,L.jsx)(fn,{type:"button",onClick:function(){return z(!0)},"aria-label":"Delete note",children:(0,L.jsx)(k.FH3,{size:"20"})})]}),p&&(0,L.jsx)(bn,{saveNoteName:function(n){P(),B({type:"editNoteName",noteId:e._id,newName:n}),(0,An.nJ)(e._id,n)},nameToUpdate:e.name,cancelEdit:P}),N&&(0,L.jsx)(Bn,{onClose:I,children:(0,L.jsx)(Dn,{onFormSubmit:function(){return function(n){_(!0),(0,An.f_)(n).then((function(n){B({type:"deleteNote",noteId:n._id}),_(!1)})).catch((function(n){return console.log(n)}))}(e)},toggleConfirm:I,name:e.name,isProcessing:D})})]}),(0,L.jsx)(sn,{onSubmit:function(n){if(""!==n.trim()){var e={id:(0,Z.x0)(4),text:n,completed:!1};i([e].concat((0,y.Z)(r)))}},bcgNoteColor:T}),(0,L.jsx)(O,{todos:r,setTodos:i,deleteTodo:function(n){i(r.filter((function(e){return e.id!==n})))},editTodo:function(n,e){i(r.map((function(t){return t.id===n?(0,b.Z)((0,b.Z)({},t),{},{text:e}):t})))},completeTodo:function(n){i((function(e){return e.map((function(e){return e.id===n?(0,b.Z)((0,b.Z)({},e),{},{completed:!e.completed}):e}))}))}})]})})}var Pn=S.Z.div(_n||(_n=(0,C.Z)(["\n  display: flex;\n  gap: 8px;\n"])));function Ln(){var n=Math.floor(16777215*Math.random()).toString(16),e=5===n.length?n+"0":n;return"#".concat(e)}function Fn(n){var e=n.toggleSortMenu,t=(0,m.useContext)(vn).dispatch,o=(0,m.useState)(!1),r=(0,f.Z)(o,2),i=r[0],s=r[1],c={name:"New note",todos:[],color:Ln()};return(0,L.jsxs)(Pn,{children:[(0,L.jsxs)(En.z,{type:"button",onClick:function(){s(!0),(0,An.AL)(c).then((function(n){t({type:"addNote",newNote:n}),s(!1)})).catch((function(n){return console.log(n)}))},disabled:i,children:["Add Note ",(0,L.jsx)(k.OrI,{size:"24"})]}),(0,L.jsxs)(En.z,{type:"button",onClick:e,children:["Sort Notes ",(0,L.jsx)(v.roE,{size:"24"})]})]})}var Mn,Jn,Rn=function(n,e){switch(e.type){case"getNotes":if(!e.notes)return;return(0,y.Z)(e.notes);case"addNote":var t=(0,b.Z)({},e.newNote);return[].concat((0,y.Z)(n),[t]);case"editNoteTodos":return n.map((function(n){return n._id===e.noteId?(0,b.Z)((0,b.Z)({},n),{},{todos:e.newTodos}):n}));case"deleteNote":return n.filter((function(n){return n._id!==e.noteId}));case"editNoteName":return n.map((function(n){return n._id===e.noteId?(0,b.Z)((0,b.Z)({},n),{},{name:e.newName}):n}));case"editNoteColor":return n.map((function(n){return n._id===e.noteId?(0,b.Z)((0,b.Z)({},n),{},{color:e.newColor}):n}));case"sortByNameUp":if(!e.notes)return;return(0,y.Z)(e.notes).sort((function(n,e){return n.name.localeCompare(e.name)}));case"sortByNameDown":if(!e.notes)return;return(0,y.Z)(e.notes).sort((function(n,e){return e.name.localeCompare(n.name)}));case"sortByCreatedUp":if(!e.notes)return;return(0,y.Z)(e.notes).sort((function(n,e){return n.createdAt.localeCompare(e.createdAt)}));case"sortByCreatedDown":if(!e.notes)return;return(0,y.Z)(e.notes).sort((function(n,e){return e.createdAt.localeCompare(n.createdAt)}));case"sortByUpdatedUp":if(!e.notes)return;return(0,y.Z)(e.notes).sort((function(n,e){return n.createdAt.localeCompare(e.updatedAt)}));case"sortByUpdatedDown":if(!e.notes)return;return(0,y.Z)(e.notes).sort((function(n,e){return e.createdAt.localeCompare(n.updatedAt)}));default:return n}},Gn=t(3e3),Hn=S.Z.div(Mn||(Mn=(0,C.Z)(["\n  display: grid;\n  width: 300px;\n  text-align: center;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.6);\n  overflow: hidden;\n"]))),On=S.Z.button(Jn||(Jn=(0,C.Z)(["\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  width: 100%;\n  padding: 16px 0;\n  font-size: 16px;\n  font-weight: 700;\n  cursor: ",";\n  border: none;\n  outline: ",";\n\n  transition: background-color 250ms linear;\n\n  :hover {\n    background-color: ",";\n    border: none;\n  }\n"])),(function(n){return n.disabled?null:"pointer"}),(function(n){return n.theme.borders.grey}),(function(n){return n.disabled?null:"grey"}));function Wn(n){var e=n.toggleSortMenu,t=n.notes,o=n.sort,r=n.setSort,i=(0,m.useContext)(vn).dispatch;return(0,L.jsxs)(Hn,{children:[(0,L.jsxs)(On,{onClick:function(){i({type:"sortByNameUp",notes:t}),e(),r("sortByNameUp")},disabled:"sortByNameUp"===o,children:["By name",(0,L.jsx)(v.XP5,{})]}),(0,L.jsxs)(On,{onClick:function(){i({type:"sortByNameDown",notes:t}),e(),r("sortByNameDown")},disabled:"sortByNameDown"===o,children:["By name",(0,L.jsx)(v.GWl,{})]}),(0,L.jsxs)(On,{onClick:function(){i({type:"sortByCreatedUp",notes:t}),e(),r("sortByCreatedUp")},disabled:"sortByCreatedUp"===o,children:["By create time",(0,L.jsx)(v.zJi,{})]}),(0,L.jsxs)(On,{onClick:function(){i({type:"sortByCreatedDown",notes:t}),e(),r("sortByCreatedDown")},disabled:"sortByCreatedDown"===o,children:["By create time",(0,L.jsx)(v.r_,{})]}),(0,L.jsxs)(On,{onClick:function(){i({type:"sortByUpdatedUp",notes:t}),e(),r("sortByUpdatedUp")},disabled:"sortByUpdatedUp"===o,children:["By update time",(0,L.jsx)(v.zJi,{})]}),(0,L.jsxs)(On,{onClick:function(){i({type:"sortByUpdatedDown",notes:t}),e(),r("sortByUpdatedDown")},disabled:"sortByUpdatedDown"===o,children:["By update time",(0,L.jsx)(v.r_,{})]})]})}function Xn(n){n.user;var e=n.isLoggedIn,t=(n.setIsLoggedIn,n.setToken,n.sort),o=n.setSort,r=(0,m.useReducer)(Rn,[]),i=(0,f.Z)(r,2),s=i[0],c=i[1],a=(0,m.useState)(!0),d=(0,f.Z)(a,2),l=d[0],u=d[1],p=(0,m.useState)(!1),x=(0,f.Z)(p,2),b=x[0],y=x[1];(0,m.useEffect)((function(){(0,An.Kk)().then((function(n){c({type:"getNotes",notes:n}),u(!1)})).catch((function(n){}))}),[]);var Z=function(){y(!b)};return(0,L.jsxs)(L.Fragment,{children:[!e&&(0,L.jsx)(g.Fg,{to:"/"}),(0,L.jsxs)(vn.Provider,{value:{dispatch:c},children:[l&&(0,L.jsx)(h.x,{pt:6,textAlign:"center",color:"white",children:(0,L.jsx)("h1",{children:"Loading your notes ..."})}),!l&&!s.length&&(0,L.jsx)(h.x,{pt:6,textAlign:"center",color:"white",children:(0,L.jsx)("h1",{children:"Notes list is empty"})}),!l&&s.length>0&&(0,L.jsx)(h.z,{breakpointCols:{default:7,2163:6,1855:5,1547:4,1239:3,931:2,623:1},children:s.map((function(n,e){return(0,L.jsx)(In,{idx:e,note:n},n._id)}))}),b&&(0,L.jsx)(Bn,{onClose:Z,children:(0,L.jsx)(Wn,{toggleSortMenu:Z,notes:s,sort:t,setSort:o})}),(0,L.jsx)(Gn.$,{children:(0,L.jsx)(Fn,{toggleSortMenu:Z})})]})]})}}}]);
//# sourceMappingURL=770.ebace087.chunk.js.map